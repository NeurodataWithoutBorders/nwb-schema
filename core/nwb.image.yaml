datasets:
- neurodata_type_def: GrayscaleImage
  neurodata_type_inc: Image
  dims:
  - x
  - y
  shape:
  - null
  - null
  doc: A grayscale image.
  dtype: numeric

- neurodata_type_def: RGBImage
  neurodata_type_inc: Image
  dims:
  - x
  - y
  - r, g, b
  shape:
  - null
  - null
  - 3
  doc: A color image.
  dtype: numeric

- neurodata_type_def: RGBAImage
  neurodata_type_inc: Image
  dims:
  - x
  - y
  - r, g, b, a
  shape:
  - null
  - null
  - 4
  doc: A color image with transparency.
  dtype: numeric

groups:
- neurodata_type_def: ImageSeries
  neurodata_type_inc: TimeSeries
  doc: Image data stored in a raw format.
  datasets:
  - name: data
    dtype: numeric
    dims:
    - - frame
      - x
      - y
    - - frame
      - x
      - y
      - r, g, b
    shape:
    - - null
      - null
      - null
    - - null
      - null
      - null
      - 3
    doc: Data representing images across frames. The dimensions are [frame][x][y] or [frame][x][y][rgb].
  - name: dimension
    dtype: int32
    dims:
    - x, y
    shape:
    - 2
    doc: Number of pixels on x and y axes.
    quantity: '?'
  - name: external_file
    dtype: text
    dims:
    - num_files
    shape:
    - null
    doc: Use of this dataset is discouraged and will be deprecated. Please use 
      ExternalImageSeries instead. Paths to one or more external file(s). 
      The field is only present if format='external'.
      This is only relevant if the image series is stored in the file system as one
      or more image file(s). This field should NOT be used if the image is stored
      in another NWB file and that file is linked to this file. 
    quantity: '?'
    attributes:
    - name: starting_frame
      dtype: int32
      dims:
      - num_files
      shape:
      - null
      doc: Each external image may contain one or more consecutive frames of the full
        ImageSeries. This attribute serves as an index to indicate which frames each file
        contains, to faciliate random access. The 'starting_frame' attribute, hence,
        contains a list of frame numbers within the full ImageSeries of the first frame
        of each file listed in the parent 'external_file' dataset. Zero-based indexing is
        used (hence, the first element will always be zero). For example, if the
        'external_file' dataset has three paths to files and the first file has 5 frames,
        the second file has 10 frames, and the third file has 20 frames, then this
        attribute will have values [0, 5, 15]. If there is a single external file that
        holds all of the frames of the ImageSeries (and so there is a single element in
        the 'external_file' dataset), then this attribute should have value [0].
  - name: format
    dtype: text
    default_value: raw
    doc: Format of image. If this is 'raw', then the raw (single-channel) binary data is 
      stored in the 'data' dataset. If this is 'external', then the attribute 'external_file'
      contains the path information to the image files. Use of external files is discouraged
      and will be deprecated. Please use ExternalImageSeries instead. If this attribute
      is not present, then the default format='raw' case is assumed.
    quantity: '?'
  links:
  - name: device
    target_type: Device
    doc: Link to the Device object that was used to capture these images.
    quantity: '?'
    
- neurodata_type_def: ExternalImageSeries
  neurodata_type_inc: NWBDataInterface
  doc: General image data stored in external files on the filesystem. Note that this type
    does not extend TimeSeries because there is no 'data' dataset. However, there is still
    a time dimension which can be stored as timestamps or a starting time and sampling rate. 
  datasets:
  - name: dimension
    dtype: int32
    dims:
    - rank
    shape:
    - null
    doc: Number of pixels on x, y, (and z) axes.
    quantity: '?'
  - name: external_file
    dtype: text
    dims:
    - num_files
    shape:
    - null
    doc: Paths to one or more external image file(s).
    quantity: '?'
    attributes:
    - name: starting_frame
      dtype: int32
      dims:
      - num_files
      shape:
      - null
      doc: "Each external image may contain one or more consecutive frames of the full
        ExternalImageSeries (e.g., if an external image is a tiff stack). This attribute 
        serves as an index to indicate which frames each file
        contains, to faciliate random access. The 'starting_frame' attribute, hence,
        contains a list of numbers corresponding to the index of the image series at which
        each external file begins. Zero-based indexing is used; hence, the first element will 
        always be zero. For example, if the 'external_file' dataset has three paths to files 
        and the first file has 5 frames, the second file has 10 frames, and the third file has 
        20 frames, then this attribute will have values [0, 5, 15]. In other words, 
        starting_frame[0] = 0; 
        for i in range(1, length(external_file)), 
          starting_frame[i] = starting_frame[i-1] + num_frames(external_file[i])
        If there is a single external file that holds all of the frames of the 
        ExternalImageSeries (and so there is a single element in the 'external_file' 
        dataset), then this attribute should have value [0]. If there are N
        external files with a single frame each, then this attribute should have values
        [0, 1, ..., N-1]."
  - name: starting_time
    dtype: float64
    doc: Timestamp of the first sample in seconds. When timestamps are uniformly
      spaced, the timestamp of the first sample can be specified and all subsequent
      ones calculated from the sampling rate attribute.
    quantity: '?'
    attributes:
    - name: rate
      dtype: float32
      doc: Sampling rate, in Hz.
    - name: unit
      dtype: text
      value: seconds
      doc: Unit of measurement for time, which is fixed to 'seconds'.
  - name: timestamps
    dtype: float64
    dims:
    - num_times
    shape:
    - null
    doc: Timestamps for samples stored in data, in seconds, relative to the
      common experiment master-clock stored in NWBFile.timestamps_reference_time.
    quantity: '?'
    attributes:
    - name: interval
      dtype: int32
      value: 1
      doc: Value is '1'
    - name: unit
      dtype: text
      value: seconds
      doc: Unit of measurement for timestamps, which is fixed to 'seconds'.
  links:
  - name: device
    target_type: Device
    doc: Link to the Device object that was used to capture these images.
    quantity: '?'

- neurodata_type_def: ImageMaskSeries
  neurodata_type_inc: ImageSeries
  doc: An alpha mask that is applied to a presented visual stimulus. The 'data' array
    contains an array of mask values that are applied to the displayed image. Mask
    values are stored as RGBA. Mask can vary with time. The timestamps array indicates
    the starting time of a mask, and that mask pattern continues until it's explicitly
    changed.
  links:
  - name: masked_imageseries
    target_type: ImageSeries
    doc: Link to ImageSeries object that this image mask is applied to.

- neurodata_type_def: OpticalSeries
  neurodata_type_inc: ImageSeries
  doc: Image data that is presented or recorded. A stimulus template movie will be
    stored only as an image. When the image is presented as stimulus, additional data
    is required, such as field of view (e.g., how much of the visual field the image
    covers, or how what is the area of the target being imaged). If the OpticalSeries
    represents acquired imaging data, orientation is also important.
  datasets:
  - name: distance
    dtype: float32
    doc: Distance from camera/monitor to target/eye.
    quantity: '?'
  - name: field_of_view
    dtype: float32
    dims:
    - - width, height
    - - width, height, depth
    shape:
    - - 2
    - - 3
    doc: Width, height, and depth of image, or imaged area, in meters.
    quantity: '?'
  - name: orientation
    dtype: text
    doc: Description of image relative to some reference frame (e.g., which way is
      up). Must also specify frame of reference.
    quantity: '?'

- neurodata_type_def: IndexSeries
  neurodata_type_inc: TimeSeries
  doc: Stores indices to image frames stored in an ImageSeries. The purpose of the
    ImageIndexSeries is to allow a static image stack to be stored somewhere, and
    the images in the stack to be referenced out-of-order. This can be for the display
    of individual images, or of movie segments (as a movie is simply a series of images).
    The data field stores the index of the frame in the referenced ImageSeries, and
    the timestamps array indicates when that image was displayed.
  datasets:
  - name: data
    dtype: int32
    dims:
    - num_times
    shape:
    - null
    doc: Index of the frame in the referenced ImageSeries.
  links:
  - name: indexed_timeseries
    target_type: ImageSeries
    doc: Link to ImageSeries object containing images that are indexed.
